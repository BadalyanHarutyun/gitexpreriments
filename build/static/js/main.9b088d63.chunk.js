(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{52:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(33),a=n.n(c),i=n(2),o=n(19),r=n(3),l=n(16),d=n(0);var j=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),o=Object(i.a)(a,2),r=o[0],j=o[1],u=Object(s.useState)(""),h=Object(i.a)(u,2),m=h[0],p=h[1],b=Object(s.useState)(""),f=Object(i.a)(b,2),O=f[0],g=f[1],x=Object(s.useState)(""),y=Object(i.a)(x,2),v=y[0],N=y[1],w=Object(s.useState)(!0),_=Object(i.a)(w,2),C=_[0],S=_[1];return Object(s.useEffect)((function(){n.length>0&&r.length>0&&-1!==m.indexOf("@")&&-1!==m.indexOf(".")&&""!==O&&O.length>=8&&O===v?S(!1):S(!0)}),[n,r,O,v,m]),Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)(l.a,{children:Object(d.jsx)("link",{rel:"stylesheet",href:"/component_css/signup.css"})}),Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("div",{className:"register__header",children:Object(d.jsx)("h2",{children:"Register"})}),Object(d.jsxs)("div",{className:"register__form",children:[Object(d.jsx)("input",{type:"text",name:"firstName",maxLength:"256",placeholder:" First Name",onChange:function(e){c(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:!n||"none"},children:"Field required"}),Object(d.jsx)("input",{type:"text",name:"lastName",maxLength:"256",placeholder:" Last Name",onChange:function(e){j(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:!r||"none"},children:"Field required"}),Object(d.jsx)("input",{type:"email",name:"email",maxLength:"256",placeholder:" Email",onChange:function(e){p(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:-1===m.indexOf("@")||-1===m.indexOf(".")||"none"},children:"Invalid Email"}),Object(d.jsx)("input",{type:"password",name:"password",maxLength:"256",placeholder:" Password",onChange:function(e){g(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:O.length<8||"none"},children:"Password must contain 8 minimum character"}),Object(d.jsx)("input",{type:"password",name:"ConfirmPassword",maxLength:"256",placeholder:" Confirm Password",onChange:function(e){N(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:v!==O||"none"},children:"Password doesn't match"}),Object(d.jsx)("button",{id:"signUpButton",disabled:C,style:{backgroundColor:C?"red":null},onClick:function(){console.log(n),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:n,lastName:r,email:m,password:O,confirmPassword:v})}).then((function(e){return e.json()})).then((function(e){document.querySelectorAll("input").forEach((function(e){return e.value=""})),alert(e.msg)}))},children:"Sign Up"}),Object(d.jsx)("a",{href:"/",children:"Sign In"})]})]})]})};var u=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],a=n[1],o=Object(s.useState)(""),j=Object(i.a)(o,2),u=j[0],h=j[1],m=Object(s.useState)(""),p=Object(i.a)(m,2),b=p[0],f=p[1],O=Object(r.f)();return Object(s.useEffect)((function(){fetch("/login",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),"/profile"===e.msg&&O("/profile")}))}),[]),Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)(l.a,{children:Object(d.jsx)("link",{rel:"stylesheet",href:"/component_css/login.css"})}),Object(d.jsxs)("div",{className:"login__form",children:[Object(d.jsx)("p",{style:{color:"white"},children:b}),Object(d.jsxs)("div",{className:"email_section",children:[Object(d.jsx)("img",{src:"../useremail.png",alt:"useremail"}),Object(d.jsx)("input",{type:"email",maxLength:"256",name:"email",onChange:function(e){a(e.target.value)}})]}),Object(d.jsxs)("div",{className:"password_section",children:[Object(d.jsx)("img",{src:"../userpassword.png",alt:"useremail"}),Object(d.jsx)("input",{type:"password",maxLength:"256",name:"password",onChange:function(e){h(e.target.value)}})]}),Object(d.jsxs)("div",{className:"login__form__links",children:[Object(d.jsx)("a",{href:"/register",children:"Create New Account"}),Object(d.jsx)("a",{href:"/forgetpassword",children:"Forgot Password?"})]}),Object(d.jsx)("button",{onClick:function(){fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:u})}).then((function(e){return e.json()})).then((function(e){console.log(e),"success"!==e.msg?(console.log(e.msg),f(e.msg)):O("/profile")}))},className:"submit__class",children:"Login"})]})]})},h=n(31),m=n(26),p=n.n(m),b=n(30),f=n(29),O=["user","dispatch"];var g=function(e){var t=e.user,n=e.dispatch,c=Object(f.a)(e,O);console.log(c),console.log(t),console.log(window.location.href);var a=Object(r.f)(),o=Object(s.useState)(""),l=Object(i.a)(o,2),j=l[0],u=l[1],h=Object(s.useState)(""),m=Object(i.a)(h,2),p=m[0],b=m[1],g=Object(s.useState)(""),x=Object(i.a)(g,2),y=x[0],v=x[1],N=Object(s.useState)(""),w=Object(i.a)(N,2),_=w[0],C=w[1],S=Object(s.useState)(""),k=Object(i.a)(S,2),T=k[0],E=k[1];return Object(s.useEffect)((function(){document.getElementById("onlineUsers").style.display="none"}),[]),Object(s.useEffect)((function(){u(t.firstName)}),[t]),Object(s.useEffect)((function(){v(t.lastName)}),[t]),Object(s.useEffect)((function(){b(t.email)}),[t]),Object(d.jsxs)("div",{className:"profile__section",children:[Object(d.jsx)("img",{src:_||t.photo||"/avatar.png",className:"profile__picture",alt:"profile"}),Object(d.jsx)("small",{style:{color:"red",display:T.size>2097152||"none"},children:"image max size is 2 megabyte"}),Object(d.jsx)("input",{type:"file",onChange:function(e){return function(e){if(E(e.target.files[0]),console.log(e.target.files[0]),e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){C(e.target.result)},t.readAsDataURL(e.target.files[0])}}(e)}}),Object(d.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(d.jsx)("input",{type:"text",name:"firstName",maxLength:"256",value:j||"",onChange:function(e){return u(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:!j||"none"},children:"Field required"}),Object(d.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(d.jsx)("input",{type:"text",name:"lastName",maxLength:"256",value:y||"",onChange:function(e){return v(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:!y||"none"},children:"Field required"}),Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",maxLength:"256",value:p||"",onChange:function(e){return b(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:!p||-1===p.indexOf("@")||-1===p.indexOf(".")||"none"},children:"Invalid Email"}),Object(d.jsx)("button",{className:"logout__button",onClick:function(){n({type:"display"}),a("/profile")},children:"Cancel"}),Object(d.jsx)("button",{className:"edit__button",style:{backgroundColor:!j||T.size>2097152||!y||-1===p.indexOf("@")||-1===p.indexOf(".")?"red":null},disabled:!j||T.size>2097152||!y,onClick:function(){console.log(T),fetch("/api/editprofile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:j,lastName:y,email:p})}).then((function(e){return e.json()})).then((function(e){"success"===e.msg||alert(e.msg)})).then((function(){if(""===T)return n({type:"display"}),void a("/profile");var e=new FormData;e.append("picture",T),fetch("/api/editprofileimage",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){"success"===e.msg?(E(""),n({type:"display"}),a("/profile")):alert(e.msg)}))}))},children:"Save"})]})},x=n(39),y=["dispatch","profileDisplay"],v=Object(x.a)("harut-app.herokuapp.com");var N=function(e){var t=e.dispatch,n=e.profileDisplay,c=(Object(f.a)(e,y),Object(r.f)()),a=Object(s.useState)(!0),o=Object(i.a)(a,2),j=(o[0],o[1]),u=Object(s.useState)(""),m=Object(i.a)(u,2),O=m[0],x=m[1],N=Object(s.useState)([]),w=Object(i.a)(N,2),_=w[0],C=w[1],S=Object(s.useState)([]),k=Object(i.a)(S,2),T=k[0],E=k[1],P=Object(s.useState)(""),I=Object(i.a)(P,2),L=I[0],F=I[1],U=Object(s.useState)({}),J=Object(i.a)(U,2),q=J[0],B=J[1];function A(){return(A=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(O),e.next=3,fetch("/api/sendmessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q.firstName,receiverId:L,data:O})});case 3:t=e.sent,console.log(t),v.emit("hello",O,L,q.firstName,q.id),window.scrollTo(0,document.body.scrollHeight),document.querySelector("textarea").value="",x("");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(n),Object(s.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/profile",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:"/"!==(n=e.sent).msg?B(n):c("/");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(s.useEffect)((function(){v.emit("addUser",q.id,q.firstName,q.photo)}),[q]),Object(s.useEffect)((function(){v.on("hello",(function(e){console.log(e),"connected"!==e&&(window.scrollTo(0,document.body.scrollHeight),C((function(t){return[].concat(Object(h.a)(t),[e])})))}))}),[]),Object(s.useEffect)((function(){v.on("getUsers",(function(e){console.log(e),E(e)}))}),[]),Object(s.useEffect)((function(){v.on("getNotification",(function(e){console.log("notification",e),new Audio("mixkit-software-interface-start-2574.wav").play(),"green"!==document.querySelector('[data-id="'.concat(e.userId,'"]')).style.backgroundColor&&(document.querySelector('[data-id="'.concat(e.userId,'"]')).children[0].children[2].style.display="inline")}))}),[]),Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)(l.a,{children:Object(d.jsx)("link",{rel:"stylesheet",href:"/component_css/profile.css"})}),Object(d.jsx)(r.c,{children:Object(d.jsx)(r.a,{exact:!0,path:"/edit",element:Object(d.jsx)(g,{dispatch:t,user:q})})}),Object(d.jsxs)("div",{id:"profile",style:{display:n},className:"profile__section",children:[Object(d.jsx)("i",{id:"onlineUsersicon",onClick:function(){t({type:"none"})},className:"fas fa-arrow-circle-left"}),Object(d.jsx)("img",{src:null===q.photo?"/avatar.png":q.photo,className:"profile__picture",alt:"profile"}),Object(d.jsx)("div",{className:"firstname__section",children:Object(d.jsxs)("p",{children:[q.firstName," ",q.lastName]})}),Object(d.jsx)("div",{className:"email__section",children:Object(d.jsx)("p",{children:q.email})}),Object(d.jsx)("button",{className:"logout__button",onClick:function(){v.emit("logout"),fetch("/logout",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return c("/")}))},children:"Logout"}),Object(d.jsx)("button",{className:"edit__button",onClick:function(){t({type:"none"}),j("none"),c("/profile/edit")},children:"Edit"})]}),Object(d.jsxs)("div",{id:"onlineUsers",style:{display:"none"===n||"none"},className:"profile__section",children:[Object(d.jsx)("div",{onClick:function(){t({type:"display"})},id:"settingsIcon",children:Object(d.jsx)("i",{className:"fas fa-bars"})}),Object(d.jsx)("h2",{children:"Online"}),Object(d.jsx)("ul",{children:T&&T.map((function(e,t){if(e.userId!==q.id)return Object(d.jsx)("li",{"data-id":e.userId,onClick:function(e){!function(e){Object(h.a)(document.getElementById("onlineUsers").children[2].children).map((function(e){return e.style.backgroundColor="inherit"})),console.log(e.target,e.currentTarget),e.currentTarget.style.backgroundColor="green",e.currentTarget.children[0].children[2].style.display="none",fetch("/api/getmessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:Number(e.target.parentNode.getAttribute("data-id"))})}).then((function(e){return e.json()})).then((function(e){return C(e)})).then((function(){return window.scrollTo(0,document.body.scrollHeight)})),F(Number(e.target.parentNode.getAttribute("data-id")))}(e)},children:Object(d.jsxs)("div",{className:"active__user","data-id":e.userId,children:[Object(d.jsx)("img",{width:"50px",src:null===e.photo?"/avatar.png":e.photo,className:"profile__picture",alt:"profile"}),Object(d.jsx)("p",{children:e.name}),Object(d.jsx)("i",{style:{display:"none"},className:"fa fa-comment","aria-hidden":"true"})]})},t)}))})]}),Object(d.jsx)("div",{className:"posts__section",children:Object(d.jsx)("ul",{className:"message__section",children:_.map((function(e,t){if(L===e.receiverId||e.userId===L)return Object(d.jsx)("li",{style:{left:e.userId===q.id?"100px":null},children:Object(d.jsx)("p",{style:{background:e.userId===q.id?"white":"linear-gradient(#9ed387, #77ba5a)"},children:e.data})},t)}))})}),Object(d.jsxs)("div",{className:"textarea__section",children:[Object(d.jsx)("textarea",{onChange:function(e){return x(e.target.value)}}),Object(d.jsx)("button",{className:"edit__button",onClick:function(){!function(){A.apply(this,arguments)}()},children:Object(d.jsx)("i",{className:"fas fa-paper-plane"})})]})]})};var w=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),o=Object(i.a)(a,2),r=o[0],j=o[1];return Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)(l.a,{children:Object(d.jsx)("link",{rel:"stylesheet",href:"/component_css/signup.css"})}),Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("div",{className:"register__header",children:Object(d.jsx)("h2",{children:"Send Email For New Password"})}),Object(d.jsxs)("div",{className:"register__form",children:[Object(d.jsx)("p",{style:{color:"red",display:!!r||"none"},children:r}),Object(d.jsx)("input",{type:"email",name:"email",maxLength:"256",placeholder:" Email",onChange:function(e){c(e.target.value)}}),Object(d.jsx)("button",{id:"signUpButton",onClick:function(){fetch("/api/forgetpassword/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}).then((function(e){return e.json()})).then((function(e){"success"===e.msg?alert("Please check your email"):j(e.msg)}))},children:"Send"}),Object(d.jsx)("a",{href:"/",children:"Sign In"})]})]})]})};var _=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),o=Object(i.a)(a,2),j=o[0],u=o[1],h=Object(r.f)();return Object(s.useEffect)((function(){fetch("/api".concat(window.location.pathname),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"success"!==e.msg&&(document.getElementsByClassName("main")[0].display="none",alert("time expired please try again"),h("/"))}))}),[]),Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)(l.a,{children:Object(d.jsx)("link",{rel:"stylesheet",href:"/component_css/signup.css"})}),Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("div",{className:"register__header",children:Object(d.jsx)("h2",{children:"Confirm password"})}),Object(d.jsxs)("div",{className:"register__form",children:[Object(d.jsx)("input",{type:"password",name:"password",maxLength:"256",placeholder:" New Password",onChange:function(e){c(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:n.length<8||"none"},children:"Password must contain 8 minimum character"}),Object(d.jsx)("input",{type:"password",name:"ConfirmPassword",maxLength:"256",placeholder:" Confirm Password",onChange:function(e){u(e.target.value)}}),Object(d.jsx)("small",{style:{color:"red",display:j!==n||"none"},children:"Password doesn't match"}),Object(d.jsx)("button",{id:"signUpButton",onClick:function(){fetch("/api".concat(window.location.pathname),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,confirmPassword:j})}).then((function(e){return e.json()})).then((function(e){alert(e.msg),h("/")}))},disabled:""===n||j!==n,children:"Confirm"})]})]})]})},C={count:"none"};function S(e,t){switch(t.type){case"display":return{count:!0};case"none":return{count:"none"};default:throw new Error}}var k=function(){var e=Object(s.useReducer)(S,C),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(d.jsx)(o.a,{children:Object(d.jsxs)(r.c,{children:[Object(d.jsx)(r.a,{exact:!0,path:"/register",element:Object(d.jsx)(j,{})}),Object(d.jsx)(r.a,{exact:!0,path:"/profile/*",element:Object(d.jsx)(N,{profileDisplay:n.count,dispatch:c})}),Object(d.jsx)(r.a,{exact:!0,path:"/forgetpassword",element:Object(d.jsx)(w,{})}),Object(d.jsx)(r.a,{exact:!0,path:"/confirmpassword/*",element:Object(d.jsx)(_,{})}),Object(d.jsx)(r.a,{exact:!0,path:"/",element:Object(d.jsx)(u,{})})]})})};a.a.render(Object(d.jsx)(k,{}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.9b088d63.chunk.js.map